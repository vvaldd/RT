SELECT * FROM `dec-2020`.students;
-- поиск WHERE
select * from students where age = 20;
select name, age from students;
select * from students where name = 'roman'; 
select * from  students where name like '%n'; -- команда похожести - like
select * from students where name like 'o%';
select * from students where name like '%o%';
select * from students where name like '___a%';
select * from students where name like '___a';
-- сортировка order by
select * from students order by age;
select * from students order by age DESC;
select * from students order by name;
select * from students order by id;
select * from students order by gender;
-- 
select * from students where gender = 'male' order by age;
select * from students where length(name) = 4;
select * from students where age >= 18 order by age;
select * from students where age <= 15; 
select * from students where age != 18; --
select * from students where age <> 18;
-- поиск в заданых величинах
select * from students where age between 20 and 30; -- команда 'между' - between
select * from students where age >= 20 and age <=30;
select * from students where gender = 'female' and age > 20;
select * from students where age > 20 or gender like 'f%'; -- команда 'или' - or
select * from students where age = 18 or (name like 'o%' and gender like 'f%');
select * from students where age between 20 and 30 or name like 'o%' order by age;
select * from students where age in(20, 25, 30); -- команда по подбору в четких параметрах - in
select * from students where name in('ira','ivan','dima');
select max(age) from students; -- макс. возраст
select min(age) from students; -- мин. возраст
select avg(age) from students; -- средний возраст
select sum(age) from students; -- общий возраст
select count(age) from students where gender ='male'; -- подсчет количества полей по определенному признаку
select max(age), gender from students group by gender; -- сортировка по  групповому признаку - group by
select
	avg(rating) as avgRat, -- переименование
    count(rating) as countRat
from ratings
where student_id = 5;
select avg(rating), count(rating), student_id from ratings group by student_id;
-- пагинация
select * from students limit 3;
select * from students limit 3 offset 3;
select * from students limit 3 offset 6;

-- обновление
update students set name = 'Petya' where age < 15 limit 1000;
SELECT * FROM `dec-2020`.students;

-- удаление
delete from students where name = 'kolya' limit 1000;
SELECT * FROM `dec-2020`.students;

-- practice
SELECT * FROM students;
select * from students where gender = 'female';
select * from students where gender = 'male' and age between 20 and 30;
select * from students where gender = 'female' and name like '_a%a';
select avg(age) from students where gender = 'male';
select max(age), name from students where gender = 'female';
select * from students limit 3 offset 8;
select count(id) from students where gender = 'female';
select count(id) from students where gender = 'male';
SELECT * FROM students;
update students set gender = 'female' where name like 'a%' limit 1000;
update students set name = 'Antonina' where name = 'anton' limit 1000;
update students set age = '10' where not name like '%a' and gender = 'female' limit 1000;
delete from students where not age between 25 and 40 limit 1000;
delete from students where age >= 25 and age <=40 limit 1000;
delete from students where id in(11, 12);